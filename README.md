# Simulink_Embedded_Coder_Example

The objective of this example is demonstrate an integration between a firmware of a any microcontroller (in this case, we are using Arduino) and the Embedded Code generated by Simulink Model Based Design.
MATLAB Version: R2016a

I'm using Wokwi just to show how the Hardware looks like.

![image](https://user-images.githubusercontent.com/45895132/181132536-d427f384-1a76-4a1a-b7a3-e8013e7303f1.png)

We get started creating a 10ms "Base Task" in arduino code. This Task will call our 3 Tasks:
- void MainTask_10ms();
- void InputsTask_10ms();
- void OutputsTask_10ms();

The setup of arduino will call:

- void InitTask();

These functions are in a sourcefile and a header file called "Tasks.cpp/.h", and its call a function to update the Input from ADC to the Model, call the Main  Step function of the Model, and finally update the Output from Model to PWM.
There is two files called "Interface.cpp" and "Interface.h" to connect the Software generated by Simulink to the Software written manually for Arduino.

You can see the code written and generated in this repository as well as the Model.

Below you can see some images of the Model:

Root:
![image](https://user-images.githubusercontent.com/45895132/181147181-5c83bb2e-f897-43eb-8627-78d5bb5e03d6.png)

Scheduler:
![image](https://user-images.githubusercontent.com/45895132/181147952-9e670491-ab29-4e21-9921-272ebe8e16d2.png)

Inputs:
![image](https://user-images.githubusercontent.com/45895132/181147819-567836a0-e195-4e3d-9fe6-f2dbbb7d603f.png)

Inputs:Function-call Subsystem:
![image](https://user-images.githubusercontent.com/45895132/181147890-3d1c7f23-d718-4d19-9bce-8d383d8176f3.png)

Main Function:
![image](https://user-images.githubusercontent.com/45895132/181147277-5224972b-8020-4b89-babb-ec6db994e1e8.png)

Main Function:Function-call Subsystem:
![image](https://user-images.githubusercontent.com/45895132/181147347-1b57b9c7-eb19-44a7-a2c9-908bff47c72b.png)

Outputs:
![image](https://user-images.githubusercontent.com/45895132/181147410-f80d5ab9-df7a-4486-92b9-e2432db06004.png)

Outputs:Function-call Subsystem:
![image](https://user-images.githubusercontent.com/45895132/181147489-cc772ace-7688-4f55-ae3d-7d10f97f4d95.png)

